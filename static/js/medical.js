const firebaseConfig = {
    apiKey: "AIzaSyDJZMjJ0sUK3w0aDK-xADkwKicNO0td4vQ",
    authDomain: "hp-storag.firebaseapp.com",
    databaseURL: "https://hp-storag-default-rtdb.firebaseio.com",
    projectId: "hp-storag",
    storageBucket: "hp-storag.appspot.com",
    messagingSenderId: "198165639979",
    appId: "1:198165639979:web:cbe896a3820d1636784b6e",
    measurementId: "G-RG39XNPNDY"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  const concernsDB = firebase.database().ref("med-data")

  document.getElementById('dataform').addEventListener('submit', submitForm);

  function submitForm(e){
    e.preventDefault();

    var acounter = 0;
    var pcounter = 0;
    var mcounter = 0;
    var total = 0;
    var tp = 42;
    var fname = document.getElementById('fname').value;
    var lname = document.getElementById('lname').value;
    var age = document.getElementById('age').value;
    var gndr = document.getElementById('gender').value;
    
    //Applicant ailments
    if (document.getElementById('aasthma').checked) {
        acounter += 1;
    }
    if (document.getElementById('adiabetes').checked) {
        acounter += 2;
    }
    if (document.getElementById('ahypertension').checked) {
        acounter += 1;
    }
    if (document.getElementById('aepilepsy').checked) {
        acounter += 1;
    }
    if (document.getElementById('acardiac').checked) {
        acounter += 1;
    }
    if (document.getElementById('ahiv').checked) {
        acounter += 2;
    }
    if (document.getElementById('acystic').checked) {
        acounter += 1;
    }
    if (document.getElementById('ahemophilia').checked) {
        acounter += 1;
    }
    if (document.getElementById('acancer').checked) {
        acounter += 2;
    }

    //Applicant's parent's ailments
    if (document.getElementById('pasthma').checked) {
        pcounter += 1;
    }
    if (document.getElementById('pdiabetes').checked) {
        pcounter += 1;
    }
    if (document.getElementById('phypertension').checked) {
        pcounter += 1;
    }
    if (document.getElementById('pepilepsy').checked) {
        pcounter += 1;
    }
    if (document.getElementById('pcardiac').checked) {
        pcounter += 1;
    }
    if (document.getElementById('phiv').checked) {
        pcounter += 2;
    }
    if (document.getElementById('pcystic').checked) {
        pcounter += 1;
    }
    if (document.getElementById('phemophilia').checked) {
        pcounter += 1;
    }
    if (document.getElementById('pcancer').checked) {
        pcounter += 2;
    }

    //symtops checkbox
    if (document.getElementById('chest').checked) {
        mcounter += 1;
    }
    if (document.getElementById('respir').checked) {
        mcounter += 1.5;
    }
    if (document.getElementById('weightl').checked) {
        mcounter += 0.5;
    }
    if (document.getElementById('nmb').checked) {
        mcounter += 1.5;
    }
    if (document.getElementById('gastry').checked) {
        mcounter += 1;
    }
    if (document.getElementById('head').checked) {
        mcounter += 1;
    }
    if (document.getElementById('rest').checked) {
        mcounter += 1;
    }
    if (document.getElementById('neuro').checked) {
        mcounter += 2;
    }
    if (document.getElementById('psych').checked) {
        mcounter += 1.5;
    }

    //symptoms
    if(document.getElementById("symp1").value != ""){
        mcounter += 0.5;
    }
    if(document.getElementById("symp2").value != ""){
        mcounter += 0.5;
    }
    if(document.getElementById("symp3").value != ""){
        mcounter += 0.5;
    }

    //button
    if(document.getElementById("med_y").checked) {
        mcounter += 1;
    }
    if(document.getElementById("med3").checked) {
        mcounter += 0.5;
    }

    total = acounter+pcounter+mcounter+5;
    
    saveMessage(fname, lname, age, gndr, total, tp);

    document.querySelector('.hid').style.display = 'block';
    
    //hide alert after 10 sec
    setTimeout(function(){
      document.querySelector('.hid').style.display = 'none';
    },10000);

    document.getElementById('dataform').reset();

  }

  function saveMessage(fname, lname, age, gndr, total, tp){
    var newMessageRef = concernsDB.push();
    newMessageRef.set({
      fname: fname,
      lname: lname,
      gender: gndr,
      age: age,
      total_vp: total,
      possible_vp: tp,
    });
  }