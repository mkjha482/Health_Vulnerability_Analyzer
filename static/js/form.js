// Initialize Firebase
const firebaseConfig = {
    apiKey: "AIzaSyD-pQEZl_0138FXsfBUAaI7k_LopL6QmAs",
    authDomain: "health-plus-e9be5.firebaseapp.com",
    databaseURL: "https://health-plus-e9be5-default-rtdb.firebaseio.com/",
    projectId: "health-plus-e9be5",
    storageBucket: "health-plus-e9be5.appspot.com",
    messagingSenderId: "288726359685",
    appId: "1:288726359685:web:919b2d75e4f849f782d3ec",
    measurementId: "G-34Y92CMLWL"
  };
  firebase.initializeApp(firebaseConfig);
  
  //Reference firebase DB
  const concernsDB = firebase.database().ref("data")
  
  // Listen for form submit
  document.getElementById('regform').addEventListener('submit', submitForm);


  // Submit form
  function submitForm(e){
    e.preventDefault();
  
    // Get values
    var fname = getInputVal('fname');
    var lname = getInputVal('lname');
    var email = getInputVal('email');
    var pass = getInputVal('pass');


    // Save message
    saveMessage(fname, lname, email, pass);
  
    //https://www.cdnjs.cloudfare.com/ajax/libs/firebase/9.9.0/firebase.js
  
    // Show alert
    document.querySelector('.hid').style.display = 'block';
    
    //hide alert after 20 sec
    setTimeout(function(){
      document.querySelector('.hid').style.display = 'none';
    },20000);

    //reset form
    document.getElementById('regform').reset();
  }
  
  // Function to get form values
  function getInputVal(id){
    return document.getElementById(id).value;
  }
  
  // Save message to firebase
  function saveMessage(fname, lname, email, pass){
    var newMessageRef = concernsDB.push();
    newMessageRef.set({
      name: fname,
      lname: lname,
      email: email,
      pass: pass,
    });
  }