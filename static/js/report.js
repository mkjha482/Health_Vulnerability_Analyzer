const firebaseConfig = {
    apiKey: "AIzaSyDJZMjJ0sUK3w0aDK-xADkwKicNO0td4vQ",
    authDomain: "hp-storag.firebaseapp.com",
    databaseURL: "https://hp-storag-default-rtdb.firebaseio.com",
    projectId: "hp-storag",
    storageBucket: "hp-storag.appspot.com",
    messagingSenderId: "198165639979",
    appId: "1:198165639979:web:cbe896a3820d1636784b6e",
    measurementId: "G-RG39XNPNDY"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  var ref = firebase.database().ref("med-data");

  var fname = '';
  var lname = '';
  var age = 0;
  var gender = '';
  var namee = '';
  var cond = '';

  ref.on('value', function(snapshot) {
    snapshot.forEach(function(childSnapshot) {
      var childData = childSnapshot.val();
    
      fname = childData.fname;
      lname = childData.lname;
      age = childData.age;
      gender = childData.gender;
      pvp = childData.possible_vp;
      tvp = childData.total_vp;

      namee = fname + " " + lname;
      vp = Math.round(tvp * 100) / pvp;
      let n = vp.toFixed(2);

      if(vp < 10){
        cond = "Optimum Health Condition, No Risk !";
      }
      if(vp > 10 && vp < 30){
        cond = "Low Risk !";
      }
      if(vp > 30 && vp < 50){
        cond = "Mild Risk, Check-up Recommended !";
      }
      if(vp > 50 && vp < 70){
        cond = "High Risk, Please consult a doctor !";
      }
      if(vp > 70){
        cond = "Critical Risk !";
      }

      document.getElementById('name').innerHTML = "Name of the applicant : " + namee;
      document.getElementById('age').innerHTML = "Age of the applicant : " + age;
      document.getElementById('gender').innerHTML = "Gender of the applicant : " + gender;
      document.getElementById('vpg').innerHTML = "Total vulnerability points assigned to the applicant : " + tvp;
      document.getElementById('vpg').innerHTML = "Total possible vulnerability points : " + pvp;
      document.getElementById('vpg').innerHTML = "According to our analysis, vulnerability percentage of the applicant is : " + n + "%";
      document.getElementById('cond').innerHTML = "Health Condition : " + cond;
  
    });
  });